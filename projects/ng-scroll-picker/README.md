Base logic inspired from https://github.com/hiyali/ng-data-picker
